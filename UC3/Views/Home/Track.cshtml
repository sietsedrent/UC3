@{
    ViewData["Title"] = "Track Workout";
}

<div class="text-center">
    <div class="parent">
        <!-- Div 2: Log a Workout Button -->
        <div class="div2">
            <button class="log-workout-btn" onclick="navigateToNewWorkout()">Log a Workout</button>
        </div>

        <!-- Div 3: Previous Workouts -->
        <div class="div3">
            <h3>Previous Workouts</h3>
            <div id="workout-list">
                <!-- Workout items worden hier dynamisch ingevoegd -->
                <div class="workout-item">
                    <p><strong>Datum:</strong> 2023-10-01</p>
                    <p><strong>Type:</strong> Hardlopen</p>
                </div>
                <div class="workout-item">
                    <p><strong>Datum:</strong> 2023-10-03</p>
                    <p><strong>Type:</strong> Fietsen</p>
                </div>
                <div class="workout-item">
                    <p><strong>Datum:</strong> 2023-10-05</p>
                    <p><strong>Type:</strong> Gewichtheffen</p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
                function navigateToNewWorkout() {
            window.location.href = '@Url.Action("NewWorkout", "Track")';
                }

        document.addEventListener("DOMContentLoaded", function() {
            // Laad workouts vanuit de database
            loadWorkouts();
        });

        function loadWorkouts() {
            fetch('@Url.Action("GetWorkouts", "Track")')
                .then(response => response.json())
                .then(data => {
                    const workoutList = document.getElementById('workout-list');
                    workoutList.innerHTML = ''; // Leeg de lijst eerst
                    data.forEach(workout => {
                        const workoutItem = document.createElement('div');
                        workoutItem.className = 'workout-item';
                        workoutItem.innerHTML = `
                            <p><strong>Datum:</strong> ${workout.workoutDate}</p>
                            <p><strong>Type:</strong> ${workout.typeWorkout}</p>
                        `;
                        workoutList.appendChild(workoutItem);
                    });
                });
        }
    </script>
}